<div class="container">
  <div class="main-ground">

    <div class="video-container">
      <div class="video-wrapper">
        <div class="video-label">ğŸ“± Your Video</div>
        <video #localVideo class="local-video" autoplay muted playsinline></video>
      </div>
      <div class="video-wrapper">
        <div class="video-label">ğŸŒ Remote Video</div>
        <video #remoteVideo autoplay playsinline></video>
        <div *ngIf="!remoteVideoActive" class="no-video">
          <div class="no-video-icon">ğŸ“¹</div>
          <div>Waiting for remote video...</div>
        </div>
      </div>
    </div>
  </div>

  <div class="pc-controls">
    <button nz-button nzType="primary" class="send-button"  (click)="createRoom()"  [nzSize]="'large'" nzShape="round" [disabled]="busy">
      <span nz-icon nzType="plus"></span>
      Create Room
    </button>
    <button nz-button nzType="primary" class="send-button" (click)="joinRandomRoom()"  [nzSize]="'large'" nzShape="round" [disabled]="busy">
      <span nz-icon nzType="swap"></span>
      Join Random
    </button>
    <button nz-button nzType="primary" class="send-button" (click)="open()" [nzSize]="'large'" nzShape="round"  [disabled]="!this.connected">
      <span nz-icon nzType="message"></span>
      Chat
    </button>
    <button nz-button nzType="primary" class="send-button" (click)="hangup()" [nzSize]="'large'" nzShape="round" [disabled]="!connected && !busy">
      <span nz-icon nzType="phone"></span>
      Hang Up
    </button>
  </div>

  <div class="mobile-controls">
    <button nz-button nzType="primary" class="send-button"  (click)="createRoom()"  [nzSize]="'large'" nzShape="round" [disabled]="busy">
      <span nz-icon nzType="plus"></span>
    </button>
    <button nz-button nzType="primary" class="send-button" (click)="joinRandomRoom()"  [nzSize]="'large'" nzShape="round" [disabled]="busy">
      <span nz-icon nzType="swap"></span>
    </button>
    <button nz-button nzType="primary" class="send-button" (click)="open()" [nzSize]="'large'" nzShape="round"  [disabled]="!this.connected">
      <span nz-icon nzType="message"></span>
    </button>
    <button nz-button nzType="primary" class="send-button" (click)="hangup()" [nzSize]="'large'" nzShape="round" [disabled]="!connected && !busy">
      <span nz-icon nzType="phone"></span>
    </button>
  </div>
</div>


<nz-drawer [nzClosable]="false" [nzVisible]="visible" nzPlacement="right" (nzOnClose)="close()" [nzWidth]="'400px'">
  <ng-container *nzDrawerContent>
    <div class="chat" style="width: 100%;">
      <div class="chat-header" style="justify-content: space-between;cursor: pointer;">
        <span>In Chat Messages</span>
          <span nz-icon nzType="close"  (click)="close()"></span>
      </div>
      <div class="messages" #messagesContainer>
        <div *ngFor="let message of messages" class="message" 
             [class.message-own]="message.sender === 'You'"
             [class.message-remote]="message.sender !== 'You'">
          <div class="message-sender">{{ message.sender }}</div>
          <div class="message-text">{{ message.text }}</div>
        </div>
      </div>
      <div class="message-input">
        <input 
          [(ngModel)]="messageText" 
          (keyup.enter)="sendMessage()" 
          placeholder="Type your message here..." 
          class="message-field"
        />
          <button nz-button nzType="primary" class="send-button" (click)="sendMessage()" [nzSize]="'large'" nzShape="circle">
            <span nz-icon nzType="send"></span>
          </button>
      </div>
    </div>
  </ng-container>
</nz-drawer>

